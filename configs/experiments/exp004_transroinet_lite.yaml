name: "exp004_transroinet_lite"
description: "TransRoiNet Lite: Memory-optimized version with smaller channels and single transformer block"
tags: ["transroinet", "transformer", "residual", "hybrid", "lite"]

dataset: "configs/datasets/fives_512.yaml"

data:
  batch_size: 1  # Reduced to minimum for memory constraints
  num_workers: 2
  pin_memory: true
  
  augmentation:
    enabled: false
  
  preprocessing:
    normalize: true
    pad_to_multiple: 32

model:
  type: "TransRoiNet"
  in_channels: 3
  out_channels: 1
  depths: [16, 32, 64, 64, 32, 16]  # Reduced by 50% from original [32, 64, 128, 128, 64, 32]
  kernel_size: 5                     # Reduced from 9 to 5 (less memory, still good receptive field)
  
  # Transformer configuration (minimal for memory)
  transformer_depth: 1               # Single transformer block (reduced from 2)
  transformer_heads: 4               # Reduced from 8 to 4 heads
  transformer_mlp_ratio: 2.0         # Reduced from 4.0 to 2.0 (smaller FFN)
  transformer_dropout: 0.1
  
  final_activation: "sigmoid"

training:
  epochs: 20
  
  optimizer:
    type: "adam"
    learning_rate: 0.0001
    weight_decay: 0.0001
  
  scheduler:
    type: "cosine"
    min_lr: 0.000001
  
  loss:
    type: "dice"
    smooth: 0.000001
  
  metrics:
    - "dice"
    - "iou"
  
  mixed_precision: false
  gradient_clip: 1.0
  
  validation:
    frequency: 1
  
  early_stopping:
    enabled: true
    patience: 5
    monitor: "val_dice"
    mode: "max"
  
  checkpoint:
    save_best: true
    save_last: true
    monitor: "val_dice"
    mode: "max"

logging:
  tensorboard: true
  log_images: false

output:
  dir: "outputs/experiments/exp004_transroinet_lite"
  save_predictions: true

seed: 42
device: "cuda"
